<!--START%HEAD-->
<title>Documentation - Terrain Painter</title>
<meta name="description" content="TC2 Painter - Documentation">
<meta name="keywords" content="TC2, TC2 Painter, Terrain Painter, Documentation">
<!--END%HEAD-->

<!--START%BANNER-->
<div class="banner bannerSmall hisrc">
	<img class="bannerImg ratio16-7" src="img/Banner_TP_LQ.jpg" data-1x="img/Banner_TP_MQ.jpg" data-2x="img/Banner_TP_HQ.jpg">
	<div class="bannerOverlay">
		<div class="bannerText">
			<div class="bannerTextCentered">
				<br> <br> <big>TC2 Node Painter</big> <br> <br> <big>Documentation</big> <br> <br>
			</div>
		</div>
	</div>
	<div class="bannerShadowBottom"></div>
</div>
<!--END%BANNER-->

<!--START%SIDE-->
<div class="sidePanel left navBox sticky">
	<big>Navigation</big>
	<br> <br>
	<ul class="panelLinks">
		<li><a href="#GettingStarted">Getting Started</a></li>
		<li><a href="#Interface">Interface</a></li>
		<li><a href="#Settings">Settings</a></li>
		<li><a href="#CanvasFormats">Canvas Formats</a></li>
		<li><a href="#BlendModes">Blend Modes</a></li>
		<li><a href="#Presets">Presets</a></li>
		<li><a href="#Shortcuts">Shortcuts</a></li>
		<li><a href="#Performance">Performance</a></li>
	</ul>
</div>
<div class="sidePanel right linkBox sticky">
	<big>Links</big>
	<br> <br>
	<ul class="panelLinks">
		<!--<li><a href="#">Asset Store</a></li>-->
		<li><a href="https://forum.unity3d.com/threads/wip-tc2-node-painter-paint-anything-a-tc2-extension-for-painting-the-world.454854/">Forum Thread</a></li>
		<li><a href="NodePainter/documentation.html">Documentation</a></li>
		<li><a href="https://github.com/Seneral/TC2-Node-Painter-Beta/issues">Beta Feedback & Bugtracker</a></li>
	</ul>
</div>
<!--END%SIDE-->

<!--START%CONTENT-->
<h1>Documentation</h1>

<h2 class="section" id="GettingStarted">Getting Started</h2>
<p>
	<ol>
		<li> Get <a href="http://www.terraincomposer.com" target="_blank">TerrainComposer 2</a> from the <a href="https://www.assetstore.unity3d.com/en/#!/content/65563" target="_blank">Asset Store</a>, download and import it. </li>
		<li> Get TC2 Node Painter from the <a href="">Asset Store</a>, download and import it. </li>
		<li> Create a new TC2 project through the TC2 window ('Window/Power of Nature Software/Terrain Composer 2') </li>
		<li> Add a node to the graph for painting, eg. in the height output - it will automatically be turned to an apropriate Image node in the next step. </li>
		<li> Add the NodePainter script to that Node. You will be presented with the TC2 Node Painter UI </li>
		<li> Create a new canvas by specifying a desired resolution and start painting! </li>
	</ol>
</p>

<h2 class="section" id="Interface">Interface Explanation</h2>
<p>
	<a href="img/NodePainter/Screen_GUI_HQ.png" target="_blank"><img class="sideImg hisrc" src="img/NodePainter/Screen_GUI_LQ.jpg" data-1x="img/NodePainter/Screen_GUI_MQ.jpg" data-2x="img/NodePainter/Screen_GUI_HQ.png" alt="NodePainter Interface"></a>

	<h4> Canvas IO </h4>
	<p>
		This section is for creating, loading and saving the canvas. <br>
		When there is no canvas loaded, you can create a canvas using the area in the outlined box, specifying size and canvas format. <br>
		Canvas IO works in both raw and png image formats - simply use the import/export buttons or drag-fields. 
		When importing raw, you will have to check if the import settings are correct - they are not saved with the raw file, but estimated from the file size. <br>
	</p>

	<h4> Canvas Preview </h4>
	<p>
		In the preview area you get a visualization of the canvas where you can also directly paint on.
		You can specify clearing borders around the preview in the settings to aid painting the edges. <br>
		Clicking on the 'E' button located at the right of the header allows you to edit the canvas name and see the current canvas format aswell as the painter's ID. <br>
		Depending on the canvas format, you can select visualization options from a toolbar below the preview: Display channels in color format or single/combined view in multi-mask format.
	</p>

	<h4> Color </h4>
	<p>
		Only shown in the color format, this region allows you to edit the color and it's intensity. Using the bar next to the header you can create and load color presets.
	</p>

	<h4> Multi Channels </h4>
	<p>
		Only shown in the Multi-Mask format, you can select and modify the individual channels here. Expanding the setup-region, you can specify a custom textures to display instead of the default channel color.
	</p>

	<h4> Brush </h4>
	<p>
		In this region you can edit the current brush and save/load presets using the numerated brush preset bar next to the header. <br>
		The first bar displays the available brush shapes - the first one is an adjustable function - followed by the blending modes (see 'Blend Modes Explanation' section below). <br>
		Furthermore you can adjust rotation, size, intensity, and, for the function brush, falloff and hardness parameters. 
		Depending on the mode you also have additional options like target and bias here. <br>
		Finally, checking the clamp toggle clamps your canvas to 0-1 and in the Multi-Mask format, you can toggle canvas normalization on and off. 
	</p>

	<h4> Modifications </h4>
	<p>
		This regions applies post-effects onto the canvas (currently only in Color and Value formats). <br>
		You can adjust the overall contrast and brightness, aswell as those of individual channels when in color format.
		As it is a post-effect until explicitly applied to the canvas, you can reset and apply these modifications using the apropriate buttons. <br>
		Additionally, you can set the canvas to an uniform value/color in this region.
	</p>

	<h4> Bottom </h4>
	<p>
		The 'Resize' region allows you to resize or expand your canvas to a specified resolution. <br>
		The 'Node Targets' list below should contain all Nodes the canvas is applied to - especially important in the Multi-Mask format! <br>
		Finally, pressing the 'Show Settings' button opens up the settings window. <br> 
	</p>
</p>

<h2 class="section" id="Settings">Settings Window</h2>
<p>
	You can access the settings window by clicking on the 'Show Settings' Button at the bottom of each painter or through 'Window/TC2 Node painter Settings'. <br>

	<a href="img/NodePainter/Screen_Settings_SRC.png" target="_blank"><img class="sideImg" src="img/NodePainter/Screen_Settings_HQ.png" alt="The Settings Window"></a>

	<h4> Paint Behaviour </h4>
	<p>
		Here you can change the interval at which is the painter paint and TC2 generates - usually, you want a greater interval on generation to allow several paint passes between each generation.
		If you get extreme stutter while painting terrains and you cannot lower terrain settings temporarily, consider highering the generation interval or even disabling Auto Generate.
		Continuous Painting also paints while you hold your mouse still.
	</p>

	<h4> Undo </h4>
	<p>
		You can disable undo completely here (not recommended) or lower the undo stack size which is especially useful when you're getting memory problems. 
		All undo entries past this number will automatically be deleted and cannot be recovered.
	</p>

	<h4> GUI Spacing </h4>
	<p>
		This section allows you to do some simple GUI adjustments like adjusting display sizes incase you are on a smaller or bigger monitor than Full HD. <br>
		You can also add a border around your canvas preview which helps you painting the borders in the GUI preview. Relative is relative to your brush size.
	</p>

	<h4> Folder Locations </h4>
	<p>
		You can move individual folder locations here incase you want to completely move the Node Painter folder or outsource specific parts. 
		They are saved per project in a text-file in ProjectSettings so you can choose paths on a per-project basis. <br>
		Resource folder might be changed when you want to use the painter at runtime, then you can simply move it to a folder called 'Resources' and all works.
		The next two folders can be completely moved to an external path, in which case the path gets absolute. The BrushStamps folder might direct to a shared brush directory - all images within this folder will be regarded as brushes.
		Cache folder stores all your current working canvases - these are NOT stored in the scene! You might want to move this to a seperate folder for source control.
	</p>
</p>

<h2 class="section" id="CanvasFormats">Canvas Formats</h2>
<p>
	The canvas format specifies how you can use the canvas and for what purpose - it does not change internal texture format, which is always RGBA. <br>
	These are the three formats you have to choose from when creating a canvas:

	<h4> Grayscale </h4>
	<p>
		A grayscale canvas is useful for height painting and simple masks in any output. 
	</p>

	<h4> Color </h4>
	<p>
		A color canvas is not directly used in any output but is there for various reasons. It can be used for applications outside of TC2 or to get interesting results when mixing and blending the individual channels together (TC2 interprets them as max(r,g,b,a)). The color region is only shown here and you also get per-channel modifications.
	</p>

	<h4> Multi-Grayscale </h4>
	<p>
		This complex format allows you to paint grayscale in multiple channels, similar to splat painting - except that it is not only used for splats, but for e.g. multiple different biomes or forests. <br>
		This canvas format is also potentially consisting of multiple textures, each of the channels corresponds to one channel on the textures - that means, the painter uses one texture each 4 channels. <br>
		Using this format shows the Multi Channel region, where you can select and edit a channel.
		You can also choose to <b>normalize the channel values</b> in the brush region, which is strongly recommended because overlapping channels will fight, and the channel which is the highest in TC2 wins, which usually gives unwanted results. But this also dramatically slows down painting when using 8 or more channels.
	</p>
</p>

<h2 class="section" id="BlendModes">Blend Modes Explanation</h2>
<p>
	There are 4 major blend modes available:
	<ul>
		<li><b>Add / Substract:</b><br> This is a basic addition (or substraction when holding shift) of the intensity onto the canvas. </li>
		<li><b>Lerp:</b><br> This mode lerps the canvas to the specified target, getting slower the closer it is to the target (in contrast to Replace).
						Intensity sets the speed of the lerp.
						This can also be used as a smoother add brush and can be inverted by holding shift (sets 1-target). </li>
		<li><b>Replace:</b><br> Linearly replaces the canvas value with the target value at the speed specified by the intensity. This mode can also be inverted by holding shift (sets 1-target). </li>
		<li><b>Smoothen / Contrast:</b><br> Decrease or increase details on the canvas texture with detail level specified through the bias property (shift to switch in between). </li>
	</ul>
</p>

<h2 class="section" id="Presets">Color/Brush Presets</h2>
<p>
	The preset system is available to both color and brush regions. You can load a preset by clicking on it's button, even when the region is collapsed, and create one by clicking the plus button. You delete them by right-clicking and selecting 'Delete' from the shown contect menu. <br>
	These presets are saved to your EditorPrefs so they will persist between sessions and painters.
</p>

<h2 class="section" id="Shortcuts">Shortcuts</h2>
<p>
	Shortcuts are used for adjusting brush parameters while painting. They work both in the GUI and in the scene view.

	<li><b>Invert Brush:</b> Holding <kbd>Shift</kbd> while painting inverts the paint blend mode, depending on the current mode. All modes have an inverted version. </li>
	<li><b>Adjust Brush Size:</b> Holding <kbd>Control</kbd> and using the <kbd>Mouse Wheel</kbd> changes the brush size. </li>
	<li><b>Adjust Brush Intensity:</b> Holding <kbd>Shift</kbd> and using the <kbd>Mouse Wheel</kbd> changes the brush intensity. </li>
	<li><b>Adjust Brush Rotation:</b> Holding <kbd>Space</kbd> and using the <kbd>Mouse Wheel</kbd> changes the brush rotation. </li>
	<li><b>Adjust Special Brush Value:</b> Holding <kbd>Control+Shift</kbd> and using the <kbd>Mouse Wheel</kbd> in supported blend modes changes the brush target or bias. </li>
	<li><b>Switch to last mode:</b> Pressing <kbd>Tab</kbd> Switches you to the last blend mode you used, allowing to quickly switch between two blend modes. </li>
</p>

<h2 class="section" id="Performance">Important Notes on Performance</h2>
<p>
	<h4> Performance </h4>
	<p>
		The performance of the painter is obviously alot slower than the default terrain brush due to the fact it has to go through several steps to finally reach the terrain.
		Node Painter is fully GPU-powered, just as TC2 is, but even the simplest setup requires several passes on the GPU which adds up quite fast. <br>
		Then comes the most performance-hungry operation: Assigning the result on the terrain. This step has been optimised to only assign the region under the brush but still takes alot of time. <br>
		Compared to the default terrain brush it appears to take longer because Node Painter allows for much higher brush sizes - resulting in bigger areas to cover - which may not be so apparent.
	</p>
	
	<h4> Memory </h4>
	<p>
		An important aspect is also memory - this can quickly get a problem depending on your canvas and setup. <br>
		If you use a high resolution or many canvas channels (in Multi-Mask format) memory consumption can get a problem if you're not careful - for each action, an undo record is created, copying all involved textures. These live in the memory until the 	maximum undo stack size is reached (30). <br>
		It is recommended to lower this value if you're on a rig with under 8GB of RAM and generally be careful.
	</p>
</p>

<!--END%CONTENT-->


<!--START%SCRIPTS-->
<!--END%SCRIPTS-->