<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="expires" content="21600"> <!-- 6 hours -->
	<meta name="author" content="Seneral">
	<meta name="keywords" content="Seneral, Unity, Developer">

	
<title>Documentation - TC2 Node Painter</title>
<meta name="description" content="TC2 Node Painter - Documentation">
<meta name="keywords" content="TC2, TC2 Node Painter, Node Painter, Terrain Painter, Documentation">

	
	<link rel="icon" type="image/ico" href="../img/Icon/favicon.ico">

	<script async type="text/javascript" src="../js/modernizr.min.js"></script>

	<link rel="stylesheet" type="text/css" media="screen" href="../css/style.css">
</head>
<body>
	<div class="bodyStyle">
		<header class="header headerheight">
	<div class="container">
		<!-- Title on the left side of the header -->
		<div class="headerLogo">
			<a href="../index.html">
				<img src="../img/Icon/FavIcon_tiny.png">
				<span>Seneral</span>
			</a>
		</div>

		<!-- Navigation controls on the right side of the header - main dropdown by default for mobile and navigation bar for desktop -->
		<div class="navHeader">
			<nav class="navList">
				<input id="burgerToggle" class="navToggle" type="checkbox">
				<label for="burgerToggle" content-toggled="&#735;" class="navButton">&#9776;</label>

				<div class="navContent">
					<div class="navGroup">
						<a class="navItem" href="index.html">Node Painter</a>
						<div class="navGroupContent">
							<a class="navItem curNav" href="documentation.html">Documentation</a>
							<a class="navItem" href="tutorials.html">Tutorials</a>
						</div>
					</div>
					
					<a class="navItem" href="../Simulation/index.html">Simulation</a>

					<a class="navItem subRef" href="https://nodeeditor.seneral.dev/index.html">Node Editor</a>

					<a class="navItem" href="../about.html">About</a>
				</div>
			
			</nav>
		</div>
	</div>
</header>
<!-- Offset content so header doesn't overlap anything -->
<div class="headerheight"> </div>

		
<div class="banner banner16-6 hisrc">
	<img class="bannerImg ratio16-7" src="../img/Banner_NP_LQ.jpg" data-1x="../img/Banner_NP_MQ.jpg" data-2x="../img/Banner_NP_HQ.jpg">
	<div class="bannerOverlay">
		<div class="bannerText">
			<div class="bannerTextCentered">
				<br> <br> <big>TC2 Node Painter</big> <br> <br> <big>Documentation</big> <br> <br>
			</div>
		</div>
	</div>
	<div class="bannerShadowBottom"></div>
</div>


		<!-- Page Content -->
		<div class="content">

			
<div class="sidePanel left navBox sticky">
	<big>Navigation</big>
	<br> <br>
	<ul class="panelLinks">
		<li><a href="#GettingStarted">Getting Started</a></li>
		<li><a href="#Examples">Examples</a></li>
		<li><a href="#Interface">Interface</a></li>
		<li><a href="#Settings">Settings</a></li>
		<li><a href="#CanvasFormats">Canvas Formats</a></li>
		<li><a href="#IOFormats">IO Formats</a></li>
		<li><a href="#BlendModes">Blend Modes</a></li>
		<li><a href="#Presets">Presets</a></li>
		<li><a href="#Shortcuts">Shortcuts</a></li>
		<li><a href="#Performance">Performance</a></li>
		<li><a href="#Glossary">Glossary</a></li>
	</ul>
</div>
<div class="sidePanel right linkBox sticky">
	<big>Links</big>
	<br> <br>
	<ul class="panelLinks">
		<li><a href="https://assetstore.unity.com/packages/slug/85286">Asset Store</a></li>
		<li><a href="https://forum.unity3d.com/threads/454854/">Forum Thread</a></li>
		<li><a href="documentation.html">Documentation</a></li>
	</ul>
</div>


			<div class="container">
				<div class="mainContent">

					
<h1>Documentation</h1>

<a href="../downloads/NodePainter/Documentation_1.1.4.pdf" target="_blank"><button class="base pageButton">Download Offline Documentation</button></a>

<a href="../downloads/NodePainter/Full_Changelog.txt" target="_blank"><button class="base pageButton">See Full Changelog</button></a>

<p>
	<h3>Version:</h3>
	<a href="documentation.html"> <b>Newest Version</b> </a> <br>
	<b>Current Version:</b> 1.1.4 <br>
	<b>Older Versions:</b> <a href="documentation_1.1.html">1.1</a> <a href="documentation_1.0.html">1.0</a> <br>
	<b>Last Updated:</b> 10.07.17 <br>
</p>


<h2 class="section" id="GettingStarted">Getting Started</h2>
<p>
	<ol>
		<li> Get <a href="http://www.terraincomposer.com" target="_blank">TerrainComposer 2</a> from the <a href="https://assetstore.unity.com/packages/slug/65563" target="_blank">Asset Store</a>, download and import it. </li>
		<li> Get <a href="http://www.seneral.dev/NodePainter/index.html" target="_blank">TC2 Node Painter</a> from the <a href="https://assetstore.unity.com/packages/slug/85286">Asset Store</a>, download and import it. </li>
		<li> Create a new TC2 project through the TC2 window ('Window/Power of Nature Software/Terrain Composer 2') </li>
		<li> Add a node to the graph for painting, e.g. in the height output - it will automatically be turned to an appropriate Image node in the next step. </li>
		<li> Add the NodePainter script to that Node. You will be presented with the TC2 Node Painter UI </li>
		<li> Create a new canvas by specifying a desired resolution and start painting! </li>
	</ol>
</p>

<h2 class="section" id="Examples">Examples</h2>
<p>
	The examples are located in the 'Node Painter/Examples' folder. It can safely be deleted if you don't need the examples anymore.
	You can check out one of the two example scenes from 'Node Painter/Examples/Scenes/':
	<ul>
		<li><b>HeightPaintDemo:</b><br> This shows a simple height painting setup with auto-splatmapping. The Node Painter component can be found in the left-most height node. </li>
		<li><b>BiomePaintDemo:</b><br> This shows the usage of the Multi-Mask-format - working similarily to splat maps - to mask three biomes (Mountains, Desert, Grassland) together.
			The Node Painter component to paint on can be found on the BiomePainting object in the hierarchy. 
			Notice the use of multiple Node Targets (bottom) for each channel to assign the canvas to both the height and splat nodes.</li>
	</ul>
</p>

<h2 class="section" id="Interface">Interface Explanation</h2>
<p>
	<a href="../img/NodePainter/Documentation/1.1.4/Screen_GUI_HQ.png" target="_blank"><img class="sideImg hisrc" src="../img/NodePainter/Documentation/1.1.4/Screen_GUI_LQ.jpg" data-1x="../img/NodePainter/Documentation/1.1.4/Screen_GUI_MQ.jpg" data-2x="../img/NodePainter/Documentation/1.1.4/Screen_GUI_HQ.png" alt="NodePainter Interface"></a>

	<h4> Canvas IO </h4>
	<p>
		This section is for creating, loading and saving the canvas. When there is no canvas loaded, you can create a new canvas using the designated area, specifying size and canvas format. <br>
		Canvas Input/Output formats include lossy PNG, lossless RAW and a custom native byte format - each with their own pros and cons, as outlined in the <a href="#IOFormats">IO Format Section</a>. <br>
		Finally, you can save/load the cache file here, providing quick and safe backup points. <br>
	</p>

	<h4> Canvas Preview </h4>
	<p>
		In the preview area you get a visualization of the canvas where you can also directly paint on. You can set Canvas Borders around the preview in the Settings to aid in edge painting. <br>
		Clicking on the 'E' button located at the right of the header allows you to edit the canvas name and set a custom cache file to synchronize painters between scenes. <br>
		The eye-icon next to it toggles the canvas projection onto the canvas, which can give you a better understanding on how the canvas affects the terrain. <br>
		When the canvas is set to Color or Multi-Mask format additional visualization options appear below the preview. <br>
		Below are the undo/redo buttons aswell as the Stop/Start Painting button used to toggle painting on and off, allowing you to use tools such as the move handle.
	</p>

	<h4> Color </h4>
	<p>
		Only shown in the color format, this region allows you to edit the color and its intensity. Using the bar next to the header you can create and load color presets.
	</p>

	<h4> Multi Channels </h4>
	<p>
		Only shown in the Multi-Mask format, you can select and modify the individual channels here. Using the context here allows you to specify a custom texture to display instead of the default channel color.
	</p>

	<h4> Brush </h4>
	<p>
		In this region you can edit the current brush and save/load presets using the numbered brush preset bar next to the header. <br>
		The first bar displays the available brush shape, the first of which is an adjustable function. 
		Below the brush bar are the settings for the current brush. <br>
		The Mode dropdown menu selects the <a href="#BlendModes">Blending Mode</a>.
		Furthermore you can adjust rotation, size, intensity, and, for the function brush, falloff and hardness parameters. 
		Depending on the mode you also have additional options like target and bias here. <br>
		Most of these parameters can also be adjusted by a <a href="#Shortcuts">shortcut</a>. <br>
		Finally, checking the clamp toggle clamps your canvas to 0-1 and in the Multi-Mask format, you can toggle canvas normalization on and off. 
	</p>

	<h4> Modifications </h4>
	<p>
		This regions applies post-effects onto the canvas (currently only in Color and Value formats). <br>
		You can adjust the overall contrast and brightness, as well as those of individual channels when in color format.
		As it is a post-effect until explicitly applied to the canvas, you can reset and apply these modifications using the appropriate buttons. <br>
		Additionally, you can set the canvas to an uniform value/color in this region.
	</p>

	<h4> Bottom </h4>
	<p>
		The 'Resize' region allows you to resize or expand your canvas to a specified resolution. <br>
		The 'Node Targets' list below should contain all Nodes the canvas is applied to - especially important in the Multi-Mask format! <br>
		Finally, pressing the 'Show Settings' button opens up the settings window. <br> 
	</p>
</p>

<h2 class="section" id="Settings">Settings Window</h2>
<p>
	You can access the settings window by clicking on the 'Show Settings' button at the bottom of any NodePainter inspector or through the menu 'Window/TC2 Node Painter Settings'. <br>

	<a href="../img/NodePainter/Documentation/1.1.4/Screen_Settings_SRC.png" target="_blank"><img class="sideImg" src="../img/NodePainter/Documentation/1.1.4/Screen_Settings_SRC.png" alt="The Settings Window"></a>

	<h4> Paint Behaviour </h4>
	<p>
		Here you can change the interval at which the painter paints and TC2 generates - usually, you want a longer interval on generation to allow several paint passes between each generation. 
		If you get stuttering while painting terrains and you cannot lower terrain resolution temporarily, consider increasing the generation interval or even disabling Auto Generate. <br>
		Enabling Continuous Painting makes the painter paint continuously even if you hold your mouse still.
	</p>

	<h4> Undo </h4>
	<p>
		You can disable undo completely here (not recommended) or lower the undo stack size which is especially useful when you're getting memory problems. 
		All undo entries past this number will automatically be deleted and cannot be recovered.
	</p>

	<h4> GUI </h4>
	<p>
		This section allows you to do some simple GUI adjustments like adjusting display sizes in case you are on a smaller or bigger monitor than Full HD. <br>
		You can also add a border around your canvas preview which helps you paint the borders in the GUI preview, aswell as change the opacity of the canvas visualization projected on the terrain.
	</p>

	<h4> Folder Locations </h4>
	<p>
		You can move individual folder locations here in case you want to completely move the Node Painter folder or outsource specific parts. 
		They are saved per project in a text-file in the ProjectSettings directory so you can choose paths on a per-project basis. <br>
		Resource folder might be changed when you want to use the painter at runtime, then you can simply move it to a folder called 'Resources' and it works. 
		The BrushStamps and Cache folders can either be moved to a different path inside the project or even an absolute, external path. <br>
		The BrushStamps folder might point to a shared brush directory - all images within this folder will be regarded as brushes. 
		The Cache folder stores all your current working canvases - these are NOT stored in the scene! You might want to move this to a external folder if you are using source control.
	</p>
</p>

<h2 class="section" id="CanvasFormats">Canvas Formats</h2>
<p>
	The canvas format defines its purpose for painting. However, it's internal representation is always RGBA. <br>
	These are the three formats you have to choose from when creating a canvas:

	<h4> Value </h4>
	<p>
		A grayscale canvas that is useful for height painting and simple masks in any output. 
	</p>

	<h4> Color </h4>
	<p>
		A color canvas is not directly used in any output but is there for various reasons. It can be used for applications outside of TC2 
		or to get interesting results when mixing and blending the individual channels together (TC2 interprets them as max(r,g,b,a)). 
		The color region is only shown here and you also get per-channel modifications.
	</p>

	<h4> Multi-Mask </h4>
	<p>
		This complex format allows you to paint in up to 24 channels, similar to splat painting. An ideal use case would be for painting biomes or forests. <br>
		Using this format shows the Multi Channel region in the inspector, where you can select, edit and add/remove channels. 
		It is important that you assign different node targets for each channel in the Node Targets region below. 
		For example, you could add the Height, Splat and Tree nodes here that correspond to the biome you are painting. <br>
		You can also choose to <b>normalize the channel</b> values in the brush region, which is strongly recommended because overlapping channels will fight, 
		and the channel which is the highest in TC2 wins, which usually gives unwanted results. 
		Basically this will replace the color of all other channels while painting, eliminating the overlapping regions. <br>
		Internally, canvases of this format potentially consist of multiple textures: Every 4 channels is represented internally by one texture, just like splat maps. 
		This might cause technical problems when using many channels, like memory shortage. Read the <a href="#Performance">notes on memory</a> below for more information.
	</p>
</p>

<h2 class="section" id="IOFormats">IO Formats</h2>
<p>
	There are several different Input/Output formats available to save the canvas, each for their own specific use case.
	Basically, it's best to use the native format most of the time. If you need to open the canvas in external programs, 
	try to use RAW if they do support RAW import and only if there's no other way you should resort to the 8-Bit PNG format.

	<h4> Custom Native Byte Format </h4>
	<p>
		A lossless 16-Bit combined BYTE format that perfectly stores the canvas in one file with extension .bytes. 
		Internally it stores all canvas meta information and embeds all canvas textures as uncompressed, lossless 16-Bit RAW data. 
		It is used by the cache system because due to the .bytes extension it is regarded as a TextAsset and thus can be referenced.
	</p>

	<h4> Texture/Image </h4>
	<p>
		A lossy 8-Bit PNG Texture format for exporting to various image editors that do not support the RAW format. 
		It stores most canvas meta information except the multi-format canvas channel count (which is rounded up to the next multiple of four after loading). 
		For canvases of the multi-format, save files are split in multiple files named 'name(n)' for each 4 channels for the lack of embedding multiple textures into one save file.
	</p>

	<h4> Raw File </h4>
	<p>
		A lossless 16-Bit RAW File export format for directly exporting to terrains and the few image editors that do support the RAW format (like Photoshop). 
		It does not store ANY canvas meta information, it is approximated from file size upon import and might need user correction.
		For canvases of the multi-format, save files are split in multiple files named 'name(n)' for each 4 channels for the lack of embedding multiple textures into one save file.
	</p>
</p>

<h2 class="section" id="BlendModes">Blend Modes Explanation</h2>
<p>
	There are 4 major blend modes available:
	<ul>
		<li><b>Add / Substract:</b><br> This is a basic addition (or substraction when holding shift) of the intensity onto the canvas. </li>
		<li><b>Lerp:</b><br> This mode lerps the canvas to the specified target, getting slower the closer it is to the target (in contrast to Replace).
						Intensity sets the speed of the lerp.
						This can also be used as a smoother add brush and can be inverted by holding shift (sets 1-target). </li>
		<li><b>Replace:</b><br> Linearly replaces the canvas value with the target value at the speed specified by the intensity. This mode can also be inverted by holding shift (sets 1-target). </li>
		<li><b>Smoothen / Contrast:</b><br> Decrease or increase details on the canvas texture with detail level specified through the bias property (shift to switch in between). </li>
	</ul>
</p>

<h2 class="section" id="Presets">Color/Brush Presets</h2>
<p>
	The preset system is available to both color and brush regions. You can load a preset by clicking on its button, even when the region is collapsed, and create one by clicking the plus button. You delete them by right-clicking and selecting 'Delete' from the shown context menu. <br>
	These presets are saved to your EditorPrefs so they will persist between sessions and painters.
</p>

<h2 class="section" id="Shortcuts">Shortcuts</h2>
<p>
	Shortcuts are used for adjusting brush parameters while painting. They work both in the GUI and in the scene view.

	<li><b>Invert Brush:</b> Holding <kbd>Shift</kbd> while painting inverts the paint blend mode, depending on the current mode. All modes have an inverted version. </li>
	<li><b>Adjust Brush Size:</b> Holding <kbd>Control</kbd> and using the <kbd>Mouse Wheel</kbd> changes the brush size. </li>
	<li><b>Adjust Brush Intensity:</b> Holding <kbd>Shift</kbd> and using the <kbd>Mouse Wheel</kbd> changes the brush intensity. </li>
	<li><b>Adjust Brush Rotation:</b> Holding <kbd>Space</kbd> and using the <kbd>Mouse Wheel</kbd> changes the brush rotation. </li>
	<li><b>Adjust Special Brush Value:</b> Holding <kbd>Control+Shift</kbd> and using the <kbd>Mouse Wheel</kbd> in supported blend modes changes the brush target or bias. </li>
	<li><b>Sample Brush Target:</b> Pressing <kbd>Control</kbd> and dragging the <kbd>Left Mouse Button</kbd> samples the target from the value under the mouse. </li>
	<li><b>Switch to last mode:</b> Pressing <kbd>Tab</kbd> Switches to the last blend mode used, allowing you to quickly switch between two blend modes. </li>
</p>

<h2 class="section" id="Performance">Notes on Performance</h2>
<p>
	<h4> Performance </h4>
	<p>
		The performance of the painter is obviously a lot slower than the default terrain brush due to the fact it has to go through several steps to finally reach the terrain. Node Painter is fully GPU-powered, just as TC2 is, but even the simplest setup requires several passes on the GPU which adds up quite fast. <br>
		Then comes the most performance-hungry operation: Assigning the result on the terrain. This step has been optimised to only assign the region under the brush but still takes alot of time. <br>
		Compared to the default terrain brush it appears to take longer because Node Painter allows for much higher brush sizes - resulting in bigger areas to cover - which may not be so apparent.
	</p>
	
	<h4> Memory </h4>
	<p>
		If you use a high resolution or many canvas channels (in Multi-Mask format) memory consumption can quickly become a problem if you're not careful. For each action performed on the canvas, an undo record is created, copying all involved textures. These live in the memory until the maximum undo stack size is reached (30). <br>
		It is recommended to lower this value if you're on a rig with under 8GB of RAM.
	</p>
</p>

<h2 class="section" id="Glossary">Glossary</h2>
<p>
	<ul>
		<li><b>NodePainter (script)</b><br> The script used to manage, paint and assign the canvas to the nodes. It is possible to assign the canvas to multiple nodes by specifying additional node targets. </li>
		<li><b>Node Targets:</b><br> Nodes the canvas are assigned to. All node target transformations of a NodePainter script are kept in sync to prevent misalignment. Either transform the NodePainter object itself or, in order to scale the node targets individually, use their height/opacity. </li>
		<li><b>Canvas:</b><br> The buffer of textures used for the painting data that is assigned to all node targets. </li>
		<li><b>Biome:</b><br> A grouping of several outputs, like height, splat, trees, etc. to represent different flora and fauna on the terrain, defined through multiple node targets per channel in a Multi-Mask canvas, each representing one respective output. </li>
	</ul>
</p>


					
				</div>
			</div>
		</div>

		<span class="debug"></span>

		<footer>
			<br> <br>
			Page developed by Seneral
			<br> <br>
			Copyright &#169; 2018 Seneral
			<br> <br>
		</footer>

		<script type="text/javascript" src="../js/page-scripts.min.js"></script>

		

	</div>
</body>
</html>